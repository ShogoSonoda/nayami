<!DOCTYPE html>
<html class="h-100">
  <head>
    <title>Nayami</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css" integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp" crossorigin="anonymous">
  </head>

  <body class="d-flex flex-column h-100">
    <div class="text-center blue">
      <%= render partial: 'shared/flash', class: "mb-0" %>
    </div>
    
    <header>
      <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container-fluid d-flex justify-content-between">
          <div>
            <%= link_to "NAYAMI", root_path, class: "edit-link navbar-brand" %>
          </div>
          <div>
            <%= search_form_for @search, url: search_problem_problems_path, class: "form-inline" do |f| %>
              <%= f.search_field :title_cont, placeholder: "悩みを検索", class: "search-form blue-border" %>
              <%= button_tag(type: "submit", class: "search-btn ml-1") do %>
                <i class="fas fa-search"></i>
              <% end %>
            <% end %>
          </div>
          <div class="my-auto">
            <% if user_signed_in? %>
              <%= link_to user_path(current_user.id) do %>
                <% if current_user.image? %>
                  <%= image_tag current_user.image.url, class: "profile-img size30" %>
                <% else %>
                  <%= image_tag 'default.png', class: "profile-img size30" %>
                <% end %>
              <% end %>
            <% end %>
          </div>
        </div>
      </nav>
    </header>


    <main class="flex-shrink-0">
      <div class="container my-3">
        <div class="row">
          <div class="col-3">
            <%= render 'layouts/menu' %>
          </div>
          <div class="col-9">
            <%= yield %>
          </div>
        </div>
      </div>
    </main>

    <footer class="footer mt-auto py-3">
      <div class="container text-center">
        <span class="text-muted">Nayami.</span>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js" integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js" integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG" crossorigin="anonymous"></script>
  </body>
</html>
